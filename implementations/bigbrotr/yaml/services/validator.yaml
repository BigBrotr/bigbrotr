# ============================================================================
# Validator Service Configuration (BigBrotr)
# ============================================================================
# Validates candidate relay URLs before promoting to relays table.
# Workflow: cleanup -> fetch chunk -> validate in parallel -> persist -> repeat
# Notes: Full network support with Tor enabled for .onion relay discovery.
# ============================================================================

# Cycle interval (seconds between validation runs)
interval: 28800.0  # 8 hours  # Range: >= 60.0

# Prometheus metrics
metrics:
  enabled: true
  port: 8002
  host: "0.0.0.0"
  path: "/metrics"

# Processing configuration
processing:
  chunk_size: 100            # Candidates per batch (Range: 10-1000)
  max_candidates: null       # Limit per run (null = unlimited)

# Cleanup configuration
cleanup:
  enabled: true
  max_failures: 100          # Remove candidates after N failed attempts  # Range: >= 1

# Network-specific settings
networks:
  clearnet:
    enabled: true
    max_tasks: 50            # Concurrent validation tasks  # Range: 1-100
    timeout: 10.0            # Connection timeout (seconds)  # Range: >= 1.0

  tor:
    enabled: true            # Enabled by default for .onion relay discovery
    proxy_url: "socks5://tor:9050"
    max_tasks: 10            # Lower concurrency for Tor network  # Range: 1-50
    timeout: 30.0            # Longer timeout for Tor latency  # Range: >= 5.0

  i2p:
    enabled: false           # Disabled by default (enable i2p service in docker-compose first)
    proxy_url: "socks5://i2p:4447"
    max_tasks: 3             # Range: 1-20
    timeout: 45.0            # Longer timeout for I2P latency  # Range: >= 10.0

  loki:
    enabled: false           # Disabled by default (requires Lokinet - Linux only)
    proxy_url: "socks5://lokinet:1080"
    max_tasks: 3             # Range: 1-20
    timeout: 30.0            # Range: >= 5.0
