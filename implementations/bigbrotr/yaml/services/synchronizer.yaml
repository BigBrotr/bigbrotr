# =============================================================================
# Synchronizer Service Configuration (BigBrotr)
# =============================================================================
# Fetches Nostr events from relays and stores them with relay associations.
# Supports multicore processing via aiomultiprocess for high throughput.
# Only values that differ from defaults are specified here.
# See _template/yaml/services/synchronizer.yaml for all options and documentation.
# =============================================================================

interval: 900.0                    # Sync every 15 minutes

metrics:
  enabled: true
  host: "0.0.0.0"                  # Bind to all interfaces for Docker access

networks:
  clearnet:
    max_tasks: 10                  # Reduced from default 50 to limit resource usage
  tor:
    enabled: true                  # Sync from Tor (.onion) relays
    max_tasks: 5                   # Lower concurrency for Tor network limitations
  i2p:
    max_tasks: 3                   # Lower concurrency for I2P network limitations
  loki:
    max_tasks: 3                   # Lower concurrency for Lokinet limitations

concurrency:
  max_processes: 4                 # Use 4 worker processes for parallel sync

overrides:
  - url: "wss://relay.damus.io"
    timeouts:
      request: 60.0                # Extended request timeout for high-volume relay
      relay: 7200.0                # Allow up to 2 hours per sync session
