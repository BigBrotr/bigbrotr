# =============================================================================
# Monitor Service Configuration (BigBrotr)
# =============================================================================
# Performs NIP-11 and NIP-66 health checks on validated relays.
# Only values that differ from defaults are specified here.
# See _template/config/services/monitor.yaml for all options and documentation.
# =============================================================================

interval: 3600.0                   # Monitor relays every hour

metrics:
  enabled: true
  host: "0.0.0.0"                  # Bind to all interfaces for Docker access

processing:
  retry:
    nip11_info:
      max_attempts: 3               # Retry failed NIP-11 info document fetches
    nip66_rtt:
      max_attempts: 2               # Retry failed round-trip time measurements
    nip66_ssl:
      max_attempts: 2               # Retry failed SSL certificate checks
    nip66_dns:
      max_attempts: 2               # Retry failed DNS resolution measurements
    nip66_geo:
      max_attempts: 1               # Retry failed geolocation lookups
    nip66_net:
      max_attempts: 1               # Retry failed ASN/network lookups
    nip66_http:
      max_attempts: 2               # Retry failed HTTP status checks

networks:
  clearnet:
    max_tasks: 50                  # Concurrent clearnet health checks
  tor:
    enabled: true                  # Monitor Tor (.onion) relays
